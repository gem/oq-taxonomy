!function(t){jQuery.fn.reverse=Array.prototype.reverse;var o={setup:function(e,n,r){e.css("position","relative"),o.saveInitialPosition(n),n.each(function(){var o=t(this);o.css({position:"absolute",left:o.data("left"),top:o.data("top")})});var i=Math.floor(e.width()/n.width()),s=i*r.rows,c=Math.ceil(n.length/i),p={};if(p.currentRow=1,p.totalRows=c,p.rowCount=i,p.shownItems=s,p.rowsForPage=r.rows,e.data("config",p),e.children(":gt("+(s-1)+")").hide(),n.each(function(o){var a=t(this),e=Math.ceil((o+1)/i);a.addClass("tj_row_"+e)}),$d_nav.length>0){for(var u=[],d=0;d<o.get_pages(e);d++)u.push(t("<li />"));$d_nav.html(u).find("li:first-child").addClass("active"),delete u}a.setup(e,n,r)},saveInitialPosition:function(o){o.each(function(){var o=t(this);o.data({left:o.position().left+"px",top:o.position().top+"px"})})},get_page:function(t){var o=t.data("config");return Math.ceil(o.currentRow/o.rowsForPage)},get_pages:function(t){var o=t.data("config");return Math.ceil(o.totalRows/o.rowsForPage)},has_next:function(t){return o.get_page(t)<o.get_pages(t)?!0:!1},has_prev:function(t){return o.get_page(t)>1?!0:!1},activateDot:function(a,e){try{t(e.navL).removeClass("disabled").addClass(o.has_prev(a)?"":"disabled"),t(e.navR).removeClass("disabled").addClass(o.has_next(a)?"":"disabled"),t(e.navDots).find("li").removeClass("active").end().find("li:nth-child("+o.get_page(a)+")").addClass("active")}catch(n){}}},a={setup:function(t,o,e){a[e.type.mode].setup(t,o,e)},def:{setup:function(o,a,e){var n=o.data("config");a.each(function(o){var r,i=t(this),s=Math.ceil((o+1)/n.rowCount),c=s%e.rows;r=1===c?"0px":0===c?(e.rows-1)*a.height()+"px":(c-1)*a.height()+"px",i.css({top:r})})},pagination:function(t,a,e){var n=t.data("config");if(1===a&&n.currentRow+e.rows>n.totalRows||-1===a&&n.currentRow-e.rows<=0)return t.data("anim",!1),!1;for(var r=[],i=[],s=0;s<e.rows;++s)r.push(".tj_row_"+(n.currentRow+s)),i.push(1===a?".tj_row_"+(n.currentRow+e.rows+s):".tj_row_"+(n.currentRow-1-s));r=r.join(","),i=i.join(","),t.children(r).hide(),t.children(i).show(),1===a?n.currentRow+=e.rows:n.currentRow-=e.rows,t.data("anim",!1),t.data("config",n),o.activateDot(t,e)}},fade:{setup:function(t,o,e){a.def.setup(t,o,e)},pagination:function(t,a,e){var n=t.data("config");if(1===a&&n.currentRow+e.rows>n.totalRows||-1===a&&n.currentRow-e.rows<=0)return t.data("anim",!1),!1;for(var r=[],i=[],s=0;s<e.rows;++s)r.push(".tj_row_"+(n.currentRow+s)),i.push(1===a?".tj_row_"+(n.currentRow+e.rows+s):".tj_row_"+(n.currentRow-1-s));i=i.join(","),t.children(r).fadeOut(e.type.speed,e.type.easing);var c=t.children(i),p=c.length,u=0;c.fadeIn(e.type.speed,e.type.easing,function(){++u,u===p&&t.data("anim",!1)}),1===a?n.currentRow+=e.rows:n.currentRow-=e.rows,t.data("config",n),o.activateDot(t,e)}},seqfade:{setup:function(t,o,e){a.def.setup(t,o,e)},pagination:function(a,e,n){var r=a.data("config");if(1===e&&r.currentRow+n.rows>r.totalRows||-1===e&&r.currentRow-n.rows<=0)return a.data("anim",!1),!1;for(var i=[],s=[],c=0;c<n.rows;++c)i.push(".tj_row_"+(r.currentRow+c)),s.push(1===e?".tj_row_"+(r.currentRow+n.rows+c):".tj_row_"+(r.currentRow-1-c));i=i.join(","),s=s.join(",");var p,u=n.type.factor;p=1===e?a.children(i):a.children(i).reverse(),p.each(function(o){var a=t(this);setTimeout(function(){a.fadeOut(n.type.speed,n.type.easing)},u+o*u)});var d;d=1===e?a.children(s):a.children(s).reverse();var w=d.length,f=0;d.each(function(o){var e=t(this);setTimeout(function(){e.fadeIn(n.type.speed,n.type.easing,function(){++f,f===w&&a.data("anim",!1)})},2*u+o*u)}),1===e?r.currentRow+=n.rows:r.currentRow-=n.rows,a.data("config",r),o.activateDot(a,n)}},updown:{setup:function(o,a,e){var n=o.data("config");o.children(":gt("+(n.shownItems-1)+")").css("opacity",0),a.each(function(o){{var r=t(this),i=Math.ceil((o+1)/n.rowCount),s=r.position().top;i%e.rows}i>e.rows&&(s=e.rows*a.height()),r.css({top:s+"px"})})},pagination:function(a,e,n){var r=a.data("config");if(1===e&&r.currentRow+n.rows>r.totalRows||-1===e&&r.currentRow-1<=0)return a.data("anim",!1),!1;for(var i=[],s=0;s<=n.rows;++s)i.push(1===e?".tj_row_"+(r.currentRow+s):".tj_row_"+(r.currentRow+(s-1)));i=i.join(",");var c;c=1===e?a.children(i):a.children(i).reverse();var p=c.length,u=0;c.each(function(){var o=t(this),i=o.attr("class").split(" ").pop(),s={},c=r.currentRow;1===e?i==="tj_row_"+c?s.opacity=0:i==="tj_row_"+(c+n.rows)&&(s.opacity=1):i==="tj_row_"+(c-1)?s.opacity=1:i==="tj_row_"+(c+n.rows-1)&&(s.opacity=0),o.show(),s.top=1===e?o.position().top-o.height()+"px":o.position().top+o.height()+"px",o.stop().animate(s,n.type.speed,n.type.easing,function(){(parseInt(s.top)<0||parseInt(s.top)>o.height()*(n.rows-1))&&o.hide(),++u,u===p&&a.data("anim",!1)})}),1===e?r.currentRow+=1:r.currentRow-=1,a.data("config",r),o.activateDot(a,n)}},sequpdown:{setup:function(t,o,e){a.updown.setup(t,o,e)},pagination:function(a,e,n){var r=a.data("config");if(1===e&&r.currentRow+n.rows>r.totalRows||-1===e&&r.currentRow-1<=0)return a.data("anim",!1),!1;for(var i=[],s=0;s<=n.rows;++s)i.push(1===e?".tj_row_"+(r.currentRow+s):".tj_row_"+(r.currentRow+(s-1)));i=i.join(",");var c,p=n.type.factor,u=1;n.type.reverse&&(u=-1),c=e===u?a.children(i):a.children(i).reverse();var d=c.length,w=0;c.each(function(o){var i=t(this),s=i.attr("class").split(" ").pop(),c={},u=r.currentRow;setTimeout(function(){1===e?s==="tj_row_"+u?c.opacity=0:s==="tj_row_"+(u+n.rows)&&(c.opacity=1):s==="tj_row_"+(u-1)?c.opacity=1:s==="tj_row_"+(u+n.rows-1)&&(c.opacity=0),i.show(),c.top=1===e?i.position().top-i.height()+"px":i.position().top+i.height()+"px",i.stop().animate(c,n.type.speed,n.type.easing,function(){(parseInt(c.top)<0||parseInt(c.top)>i.height()*(n.rows-1))&&i.hide(),++w,w===d&&a.data("anim",!1)})},p+o*p)}),1===e?r.currentRow+=1:r.currentRow-=1,a.data("config",r),o.activateDot(a,n)}},showhide:{setup:function(o,a,e){var n=o.data("config");a.each(function(o){var r,i=t(this),s=Math.ceil((o+1)/n.rowCount),c=s%e.rows;r=1===c?"0px":0===c?(e.rows-1)*a.height()+"px":(c-1)*a.height()+"px",i.css({top:r})})},pagination:function(t,a,e){var n=t.data("config");if(1===a&&n.currentRow+e.rows>n.totalRows||-1===a&&n.currentRow-e.rows<=0)return t.data("anim",!1),!1;for(var r=[],i=[],s=0;s<e.rows;++s)r.push(".tj_row_"+(n.currentRow+s)),i.push(1===a?".tj_row_"+(n.currentRow+e.rows+s):".tj_row_"+(n.currentRow-1-s));r=r.join(","),i=i.join(","),t.children(r).hide(e.type.speed,e.type.easing);var c=t.children(i),p=c.length,u=0;c.show(e.type.speed,e.type.easing,function(){++u,u===p&&t.data("anim",!1)}),1===a?n.currentRow+=e.rows:n.currentRow-=e.rows,t.data("config",n),o.activateDot(t,e)}},disperse:{setup:function(o,a,e){var n=o.data("config");a.each(function(o){var r,i=t(this),s=Math.ceil((o+1)/n.rowCount),c=s%e.rows;r=1===c?"0px":0===c?(e.rows-1)*a.height()+"px":(c-1)*a.height()+"px",i.css({top:r}).data("top",r)})},pagination:function(a,e,n){var r=a.data("config");if(1===e&&r.currentRow+n.rows>r.totalRows||-1===e&&r.currentRow-n.rows<=0)return a.data("anim",!1),!1;for(var i=[],s=[],c=0;c<n.rows;++c)i.push(".tj_row_"+(r.currentRow+c)),s.push(1===e?".tj_row_"+(r.currentRow+n.rows+c):".tj_row_"+(r.currentRow-1-c));i=i.join(","),s=s.join(","),a.children(i).each(function(){var o=t(this);o.stop().animate({left:o.position().left+Math.floor(101*Math.random())-50+"px",top:o.position().top+Math.floor(101*Math.random())-50+"px",opacity:0},n.type.speed,n.type.easing,function(){o.css({left:o.data("left"),top:o.data("top")}).hide()})});var p=a.children(s);total_elems=p.length,cnt=0,p.each(function(){var o=t(this);o.css({left:parseInt(o.data("left"))+Math.floor(301*Math.random())-150+"px",top:parseInt(o.data("top"))+Math.floor(301*Math.random())-150+"px",opacity:0}).show().animate({left:o.data("left"),top:o.data("top"),opacity:1},n.type.speed,n.type.easing,function(){++cnt,cnt===total_elems&&a.data("anim",!1)})}),1===e?r.currentRow+=n.rows:r.currentRow-=n.rows,a.data("config",r),o.activateDot(a,n)}},rows:{setup:function(t,o,e){a.def.setup(t,o,e)},pagination:function(a,e,n){var r=a.data("config");if(1===e&&r.currentRow+n.rows>r.totalRows||-1===e&&r.currentRow-n.rows<=0)return a.data("anim",!1),!1;for(var i=[],s=[],c=0;c<n.rows;++c)i.push(".tj_row_"+(r.currentRow+c)),s.push(1===e?".tj_row_"+(r.currentRow+n.rows+c):".tj_row_"+(r.currentRow-1-c));i=i.join(","),s=s.join(","),a.children(i).each(function(){var o,a=t(this),e=a.attr("class").split(" ").pop().match(/tj_row_(\d+)/)[1];o=e%2===0?n.type.factor:-n.type.factor,a.stop().animate({left:a.position().left+o+"px",opacity:0},n.type.speed,n.type.easing,function(){a.css({left:a.data("left")}).hide()})});var p=a.children(s);total_elems=p.length,cnt=0,p.each(function(){var o,e=t(this),r=e.attr("class").split(" ").pop().match(/tj_row_(\d+)/)[1];o=r%2===0?n.type.factor:-n.type.factor,e.css({left:parseInt(e.data("left"))+o+"px",opacity:0}).show().animate({left:e.data("left"),opacity:1},n.type.speed,n.type.easing,function(){++cnt,cnt===total_elems&&a.data("anim",!1)})}),1===e?r.currentRow+=n.rows:r.currentRow-=n.rows,a.data("config",r),o.activateDot(a,n)}}},e={init:function(e){if(this.length){var n={rows:2,navL:"#jf_tj_prev",navR:"#jf_tj_next",navDots:"#jf_tj_dots",type:{mode:"def",speed:500,easing:"jswing",factor:50,reverse:!1,timeout:3e3}};return this.each(function(){function r(){return s.data("anim")?!1:(config=s.data("config"),config.totalRows===config.currentRow?($backToTop===!1&&($backToTop=!0),s.data("anim",!0),a[n.type.mode].pagination(s,-1,n),!1):$backToTop===!0?(1===config.currentRow?($backToTop=!1,s.data("anim",!0),a[n.type.mode].pagination(s,1,n)):(s.data("anim",!0),a[n.type.mode].pagination(s,-1,n)),!1):$backToTop===!1?(s.data("anim",!0),a[n.type.mode].pagination(s,1,n),!1):void 0)}e&&t.extend(n,e);var i=t(this).css("visibility","hidden"),s=i.find("ul.jf_tj_gallery"),c=s.children("li"),p=c.length,u=t(n.navL),d=t(n.navR);$d_nav=t(n.navDots),$timeout=n.type.timeout,$backToTop=!0,u.addClass("disabled"),s.data("anim",!1);var w=0;if(c.find("img").each(function(){var e=t(this);t("<img/>").load(function(){++w,w===p&&(o.setup(s,c,n),i.css("visibility","visible"),u.length&&u.bind("click.gridnav",function(){return clearInterval(f),s.data("anim")?!1:(s.data("anim",!0),a[n.type.mode].pagination(s,-1,n),!1)}),d.length&&d.bind("click.gridnav",function(){return clearInterval(f),s.data("anim")?!1:(s.data("anim",!0),a[n.type.mode].pagination(s,1,n),!1)}),i.bind("mousewheel.gridnav",function(t,o){if(o>0){if(s.data("anim"))return!1;s.data("anim",!0),a[n.type.mode].pagination(s,-1,n)}else{if(s.data("anim"))return!1;s.data("anim",!0),a[n.type.mode].pagination(s,1,n)}return!1}))}).attr("src",e.attr("src"))}),$timeout>0){var f=setInterval(r,$timeout);s.hover(function(){clearInterval(f)},function(){f=setInterval(r,n.type.timeout)})}})}}};t.fn.gridnav=function(o){return e[o]?e[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void t.error("Method "+o+" does not exist on jQuery.gridnav"):e.init.apply(this,arguments)}}(jQuery);